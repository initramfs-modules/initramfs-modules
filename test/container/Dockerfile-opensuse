FROM registry.opensuse.org/opensuse/tumbleweed-dnf:latest

# kernel
RUN dnf -y install --setopt=install_weak_deps=False kernel

# dracut
RUN dnf -y install --setopt=install_weak_deps=False dracut

# common
RUN dnf -y install --setopt=install_weak_deps=False btrfs-progs cryptsetup dash dmraid mdadm sed lvm2 make sudo e2fsprogs parted bzip2

# common - but distro specific name
RUN dnf -y install --setopt=install_weak_deps=False qemu-kvm squashfs ntfsprogs busybox

# networking
RUN dnf -y install --setopt=install_weak_deps=False \
    nfs-utils nbd dhcp-server dhcp-client iproute iputils iscsiuio open-iscsi dbus-broker tgt

RUN dnf -y install --setopt=install_weak_deps=False \
    xz tar kbd procps pigz \
    && dnf -y update && dnf clean all
